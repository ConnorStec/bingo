# Bingo Party

Casual no-accounts bingo web app. Users create rooms with random join codes, add options for bingo spaces, and create randomized cards. Realtime notifications and in-game chat. OpenAI-compatible API for generating options for bingo spaces. Like a chill and innocent prediction market.

> This is almost entirely generated by Claude Code over a week for a family gathering. I barely know what's in here

## Getting Started

### Prerequisites

- Node.js 18+ and npm
- Docker and Docker Compose

### Setup

1. **Start the database:**
   ```bash
   docker-compose up -d
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```

3. **Set up environment variables:**

   Create `.env` files from the examples:
   ```bash
   cp backend/.env.example backend/.env
   cp frontend/.env.example frontend/.env
   ```

   The default values should work for local development.

4. **Run database migrations:**
   ```bash
   npm run migration:run --workspace=backend
   ```

5. **Start development servers:**
   ```bash
   # Terminal 1 - Backend
   npm run dev --workspace=backend

   # Terminal 2 - Frontend
   npm run dev --workspace=frontend
   ```

6. **Open the app:**
   Navigate to `http://localhost:5173` in your browser.

### Development

- **Backend:** NestJS API with Socket.IO at `http://localhost:3000`
- **Frontend:** React + Vite app at `http://localhost:5173`
- **Database:** PostgreSQL at `localhost:5432`

### Project Structure

```
bingo-party/
├── backend/          # NestJS backend with Socket.IO
├── frontend/         # React + Vite frontend
├── docker-compose.yml
└── package.json      # Workspace configuration
```

## Features

### Core Gameplay
- **Quick Start:** Create rooms instantly with 5-character join codes for easy sharing
- **Pre-game Lobby:** Players submit and curate bingo space options
- **Randomized Cards:** Each player gets a unique 5x5 card with exactly one randomly-placed free space
- **Realtime updates:** Integrated chat for the room with live updates when players mark spaces or win
- **Card Viewing:** View everyone's cards anytime in-game

### Technical Features
- **Session Persistence:** Players can disconnect and reconnect without losing progress
- **Join in Progress:** New players joining active games will receive a fresh card
- **Mobile-First Design:** Responsive UI optimized for phones and tablets
- **WebSocket Communication:** Low-latency real-time updates via Socket.IO
- **AI Slop**: Connect your own OpenAI-compatible api and generate useless placeholder values

## Architecture

### Backend (`/backend`)
- **Framework:** NestJS
- **Database:** PostgreSQL with TypeORM
- **Real-time:** Socket.IO for WebSocket connections
- **Key Services:**
  - `RoomsService`: Room management and options pool
  - `PlayersService`: Player sessions and authentication
  - `CardsService`: Card generation with Fisher-Yates shuffle, mark/unmark, win detection
  - `GameGateway`: Socket.IO event handlers for real-time updates
  - `LlmService`: Connect to an OpenAPI-compatible endpoint for LLM interactions

### Frontend (`/frontend`)
- **Framework:** React with TypeScript
- **Build Tool:** Vite
- **Styling:** TailwindCSS (mobile-first)
- **Real-time:** Socket.IO client
- **State Management:** React Context (Socket, Notifications)
- **Key Pages:**
  - `Home`: Create or join room
  - `JoinRoom`: Enter player name
  - `Room`: Lobby (add options) or Game (bingo card)

## Deployment

### Production Deployment

The application is ready for deployment to platforms that support Node.js and PostgreSQL:

**Recommended Platforms:**
- **Railway:** Simple deployment with built-in PostgreSQL, good WebSocket support
   - worked flawlessly for me. fast setup and deployments
- **Render:** Free tier available, supports Node + PostgreSQL
- **Fly.io:** Excellent WebSocket support, global edge deployment

**Deployment Checklist:**
1. Set up PostgreSQL database on your hosting platform
2. Configure environment variables (see `.env.example` files)
3. Run database migrations: `npm run migration:run:prod --workspace=backend`
4. Build both frontend and backend: `npm run build`
5. Ensure WebSocket connections are properly configured (Socket.IO uses both HTTP and WebSocket protocols)
6. Configure CORS settings in backend for your frontend domain

**Environment Variables:**
- Backend requires: `DATABASE_URL`, `PORT`, `NODE_ENV`, `FRONTEND_URL`
- Frontend requires: `VITE_BACKEND_URL`, `VITE_WS_URL`

See the `.env.example` files in each workspace for complete configuration.

## Known Limitations & Future Enhancements

### Security Considerations
- **Player ID Spoofing:** Current implementation allows clients to send their own `playerId` in mark/unmark events. This is acceptable for trusted family gameplay but should be addressed before public deployment.
- **Session Token Handling:** Tokens are sent in socket event payloads and visible in network traffic. Consider moving to WebSocket handshake authentication.

### Future Improvements
- Avatar upload/selfie/doodle feature
- Close rooms to new players
- Game restart/reset functionality
- Fancy `Bingo!` win animation
- History and statistics tracking
- Game management for multiple simultaneous rooms
